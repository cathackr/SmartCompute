<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartCompute Intelligence Dashboard</title>
    <link rel="stylesheet" href="css/token_dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
</head>
<body>
    <!-- Main Dashboard Container -->
    <div class="dashboard-container">
        
        <!-- Header with Settings Icon -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1 class="dashboard-title">SmartCompute Intelligence Dashboard</h1>
                <div class="header-actions">
                    <div class="transparency-indicator" id="transparencyIndicator">
                        <span class="indicator-dot" id="indicatorDot"></span>
                        <span class="indicator-text" id="indicatorText">Datos en tiempo real</span>
                    </div>
                    <button class="settings-btn" id="settingsBtn" title="Personalizar Dashboard">
                        ‚öôÔ∏è
                    </button>
                </div>
            </div>
        </header>

        <!-- Key Metrics Row -->
        <section class="metrics-summary">
            <div class="metric-card">
                <div class="metric-icon">üí∞</div>
                <div class="metric-content">
                    <div class="metric-label" data-key="cost">Gastos Hoy</div>
                    <div class="metric-value" id="dailyCost">$24.50</div>
                    <div class="metric-change positive" id="costChange">+12%</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">üìà</div>
                <div class="metric-content">
                    <div class="metric-label" data-key="efficiency">Eficiencia</div>
                    <div class="metric-value" id="efficiency">94%</div>
                    <div class="metric-change positive" id="efficiencyChange">+2%</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">üî•</div>
                <div class="metric-content">
                    <div class="metric-label" data-key="tokens">Tokens</div>
                    <div class="metric-value" id="tokenCount">1,240</div>
                    <div class="metric-change neutral" id="tokenChange">+15</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">‚ö°</div>
                <div class="metric-content">
                    <div class="metric-label" data-key="response_time">Respuesta</div>
                    <div class="metric-value" id="responseTime">1.2s</div>
                    <div class="metric-change positive" id="responseChange">-0.3s</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title" data-key="cost_analysis">An√°lisis de Costos</h3>
                    <div class="chart-controls">
                        <select class="time-range-select" id="costTimeRange">
                            <option value="today">Hoy</option>
                            <option value="week">Semana</option>
                            <option value="month">Mes</option>
                        </select>
                    </div>
                </div>
                <canvas id="costChart" width="400" height="200"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title" data-key="model_usage">Uso por Modelo</h3>
                    <div class="chart-legend" id="modelLegend"></div>
                </div>
                <canvas id="modelChart" width="400" height="200"></canvas>
            </div>
        </section>

        <!-- Detailed Analytics Section -->
        <section class="analytics-section">
            <div class="analytics-card">
                <h3 class="analytics-title" data-key="budget_status">Estado del Presupuesto</h3>
                <div class="budget-progress">
                    <div class="budget-bar">
                        <div class="budget-fill" id="budgetFill" style="width: 65%"></div>
                    </div>
                    <div class="budget-info">
                        <span class="budget-used">$650 / $1,000</span>
                        <span class="budget-remaining">$350 restantes</span>
                    </div>
                </div>
                <div class="budget-projection">
                    <div class="projection-item">
                        <span class="projection-label" data-key="estimated_end">Estimado agotarse:</span>
                        <span class="projection-value">En 12 d√≠as</span>
                    </div>
                </div>
            </div>

            <div class="analytics-card">
                <h3 class="analytics-title" data-key="optimization_suggestions">Sugerencias de Optimizaci√≥n</h3>
                <div class="optimization-list" id="optimizationList">
                    <div class="optimization-item">
                        <div class="optimization-icon">üí°</div>
                        <div class="optimization-content">
                            <div class="optimization-title">Cambiar a GPT-3.5 para tareas simples</div>
                            <div class="optimization-savings">Ahorro estimado: $8.50/d√≠a</div>
                        </div>
                    </div>
                    <div class="optimization-item">
                        <div class="optimization-icon">‚ö°</div>
                        <div class="optimization-content">
                            <div class="optimization-title">Optimizar longitud de respuestas</div>
                            <div class="optimization-savings">Reducci√≥n de tokens: 25%</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Provider Status Section -->
        <section class="provider-section">
            <h3 class="section-title" data-key="provider_status">Estado de Proveedores</h3>
            <div class="provider-grid" id="providerGrid">
                <div class="provider-card" data-provider="openai">
                    <div class="provider-header">
                        <div class="provider-name">OpenAI</div>
                        <div class="provider-status online">‚óè</div>
                    </div>
                    <div class="provider-info">
                        <div class="provider-detail">
                            <span class="detail-label">API Status:</span>
                            <span class="detail-value api-connected">Conectado</span>
                        </div>
                        <div class="provider-detail">
                            <span class="detail-label">Precisi√≥n:</span>
                            <span class="detail-value">99.2%</span>
                        </div>
                        <div class="provider-detail">
                            <span class="detail-label">√öltima sync:</span>
                            <span class="detail-value">Hace 2 min</span>
                        </div>
                    </div>
                </div>

                <div class="provider-card" data-provider="anthropic">
                    <div class="provider-header">
                        <div class="provider-name">Anthropic</div>
                        <div class="provider-status learning">‚óè</div>
                    </div>
                    <div class="provider-info">
                        <div class="provider-detail">
                            <span class="detail-label">API Status:</span>
                            <span class="detail-value learning-mode">Modo aprendizaje</span>
                        </div>
                        <div class="provider-detail">
                            <span class="detail-label">Precisi√≥n:</span>
                            <span class="detail-value">94.1% ¬± 3%</span>
                        </div>
                        <div class="provider-detail">
                            <span class="detail-label">Mejorando:</span>
                            <span class="detail-value">+1.2% esta semana</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Customization Panel (Hidden by default) -->
    <div class="customization-panel" id="customizationPanel">
        <div class="panel-header">
            <h3>‚öôÔ∏è Personalizar Dashboard</h3>
            <button class="panel-close" id="panelClose">√ó</button>
        </div>
        
        <div class="panel-content">
            <!-- Label Customization -->
            <div class="customization-section">
                <h4>üè∑Ô∏è Etiquetas</h4>
                <div class="label-list" id="labelList">
                    <!-- Labels will be populated by JavaScript -->
                </div>
            </div>

            <!-- Unit Preferences -->
            <div class="customization-section">
                <h4>üìè Unidades</h4>
                <div class="unit-preferences">
                    <div class="unit-group">
                        <label>Moneda:</label>
                        <select class="unit-select" data-metric="currency">
                            <option value="usd">USD ($)</option>
                            <option value="eur">EUR (‚Ç¨)</option>
                            <option value="mxn">MXN (MX$)</option>
                            <option value="cop">COP (COP$)</option>
                        </select>
                    </div>
                    
                    <div class="unit-group">
                        <label>Temperatura:</label>
                        <select class="unit-select" data-metric="temperature">
                            <option value="celsius">Celsius (¬∞C)</option>
                            <option value="fahrenheit">Fahrenheit (¬∞F)</option>
                            <option value="kelvin">Kelvin (K)</option>
                        </select>
                    </div>
                    
                    <div class="unit-group">
                        <label>Tiempo:</label>
                        <select class="unit-select" data-metric="time">
                            <option value="milliseconds">Milisegundos (ms)</option>
                            <option value="seconds">Segundos (s)</option>
                            <option value="minutes">Minutos (min)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Language Presets -->
            <div class="customization-section">
                <h4>üåç Idioma</h4>
                <div class="language-buttons">
                    <button class="lang-btn active" data-lang="spanish">Espa√±ol</button>
                    <button class="lang-btn" data-lang="english">English</button>
                    <button class="lang-btn" data-lang="portuguese">Portugu√™s</button>
                </div>
            </div>

            <!-- Actions -->
            <div class="customization-section">
                <h4>üîß Acciones</h4>
                <div class="action-buttons">
                    <button class="action-btn secondary" id="resetPreferences">Restaurar valores por defecto</button>
                    <button class="action-btn secondary" id="exportPreferences">Exportar configuraci√≥n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notifications">
        <!-- Notifications will be added dynamically -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Actualizando dashboard...</div>
    </div>

    <script src="js/token_dashboard.js"></script>
</body>
</html>